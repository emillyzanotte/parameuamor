const mensagens = {
  1: {
    texto: `E aÃ­, amor? Ansioso para seu dia? Espero que sim! Porque eu tÃ´ aqui torcendo pra esse momento ser muito especial ğŸ’–
Espero que goste desse site, pq olha... nÃ£o Ã© fÃ¡cil kkkk.Tive que mexer com JavaScript, o que nÃ£o Ã© nada legal, mas tudo por vocÃª ğŸ˜˜
Essa primeira carta Ã© mais pra te explicar a dinÃ¢mica, mas acredito que vocÃª jÃ¡ entendeu!
SÃ£o trÃªs cartas, trÃªs dias atÃ© seu aniversÃ¡rio. A cada 24 horas, uma nova cartinha Ã© liberada.<br><br>
ğŸ‘‰ <a href="foto1.html" target="_blank">Clique aquiğŸ’•</a>`,
    // imagem: "foto1.jpg"
  },
  2: {
    texto: ` Oi, meu amor. ğŸ’–

Hoje Ã© o segundo dia dessas cartinhas, e eu queria aproveitar pra te lembrar de algo que talvez eu nÃ£o diga o suficienteâ€¦
VocÃª Ã© uma das melhores coisas que jÃ¡ aconteceram na minha vida.
Com vocÃª ao meu lado, tudo Ã© melhor.Seu abraÃ§o Ã© meu lar, e o seu olhar me faz sentir que estou exatamente onde deveria estar. âœ¨
Eu admiro tudo em vocÃª, o jeito que sorri, o cuidado que tem comigo, a forma como me escuta e me entende mesmo quando eu nem sei explicar o que estou sentindo.
Estar com vocÃª Ã© a mesma coisa que andar sob a luz, porque eu sempre enconto caminhos claros que Ã© vocÃª.
Obrigada por ser vocÃª. Por me amar do jeitinho que eu sou. Por estar aqui.
Te amo, cada dia que passa, esse amor sÃ³ cresce mais um pouquinho. ( um poucÃ£o na verdade) <br><br>
ğŸ‘‰ <a href="foto2.html" target="_blank">Clique aquiğŸ’•</a>`,
    // imagem: "foto2.jpg"
  },
  3: {
    texto: ` Chegamos a ultima cartinha... ğŸ’ <br><br> Meu amor, hoje Ã© o seu tÃ£o aguardado dia, e eu nem sei por onde comeÃ§arâ€¦
Como expressar em palavras o quanto vc Ã© incrÃ­vel e o quanto eu sou grata por Deus ter colocado vc na minha vida Eu sei que parece clichÃª, mas Ã© real, desde que vc chegou, tudo ficou mais colorido, mais cheio de sentido. Vc virou minha paz, minha risada boba no meio do caos, meu abraÃ§o preferido no fim de um dia difÃ­cil.
Desde que te conheci, tudo ficou mais bonito, mais feliz. Seu jeitinho, seu carinho, seu sorriso, seu abraÃ§oâ€¦ tudo em vc me encanta! AtÃ© quando vc tÃ¡ de cara feia (que aliÃ¡s, Ã© difÃ­cil porque atÃ© bravo vc Ã© bonito, chega atÃ© ser injusto ). Cada detalhe seu me fascina.
 Eu me apaixono por vc de novo a cada dia. Por quem vc Ã©, pelo jeito que vc cuida de mim.
Hoje eu quero te lembrar o quanto vc Ã© especial.E nÃ£o Ã© sÃ³ porque Ã© seu aniversÃ¡rio, mas porque todos os dias ao seu lado sÃ£o motivo de celebraÃ§Ã£o. Vc Ã© meu parceiro, namorado e futuro esposo que vai se tornar o homem da minha  vida, meu confidente, meu apoio, meu maior incentivo. Vc me inspira, me acalma, me provoca risadas e, Ã s vezes, umas vontades de te bater tambÃ©m, mas isso Ã© normal, nÃ©?
Eu poderia passar o dia inteiro falando sobre todas as suas qualidadesâ€¦ como vc Ã© gentil, inteligente, engraÃ§ado (mesmo com aquelas piadas ruins que sÃ³ a gente ri), como vc me faz sentir amada sÃ³ com um olhar. Como vc me dÃ¡ paz. Como vc me escuta atÃ© quando eu sÃ³ quero falar besteira. Como vc me respeita, me apoia, " acredita " em mim mesmo quando eu tÃ´ desanimada. E como vc me arranca sorrisos atÃ© nos dias mais difÃ­ceis, mesmo quando eu digo que quero ficar sozinha e, cinco minutos depois, jÃ¡ tÃ´ no seu colo como se nada tivesse acontecido.
Vc Ã© minha pessoa. Aquela que eu quero ao meu lado em todos os momentos , nos bons e nos ruins. Aquela que eu quero construir uma vida, viajar, sonhar, fazer planos (mesmo que a gente nÃ£o siga metade deles). SÃ³ de saber que vc tÃ¡ comigo, tudo jÃ¡ me faz feliz.
E hoje, no seu dia, o meu maior desejo Ã© que tudo de bom que existe no mundo te alcance. Que vc tenha saÃºde, paz, alegria, amor e prosperidade, que continue conquistando tudo aquilo que vc deseja (inclusive muito dinheiro, nÃ© amor, porque a gente merece uma vida de rei e rainhaâ€¦ ). Que vc continue sendo esse homem incrÃ­vel, com esse coraÃ§Ã£o enorme, com esse jeitinho que sÃ³ vc tem de me fazer sentir a pessoa mais amada do mundo ( as vzs, pra vc nÃ£o se achar tanto ).
Vc Ã© companheiro, divertido, carinhoso, um pouquinho chato (tÃ¡, Ã s vezes um tiquinho a mais), mas atÃ© isso me faz rir. Vc tem um jeito de me olhar que desarma qualquer mau humor, e um abraÃ§o que parece casa. Eu poderia continuar aqui por horas escrevendo, porque quando o assunto Ã© vc, as palavras simplesmente nÃ£o sÃ£o suficientes.
Queria poder colocar num potinho todos os momentos bons que a gente jÃ¡ viveu juntos , nossos rolezinhos, nossas conversas longas por telefone, nossos beijinhos, na Ã©poca do condomÃ­nio, quando ficavamos observando as estrelas e conversando, os filmes que eu tentava assistir e vc nÃ£o deixava, os memes que a gente compartilha ( compartilhava nÃ©, porq vc NUNCA mais me respondeu no ttk ), os apelidos bobos que sÃ³ a gente entendeâ€¦ tudo isso faz parte do que somos, e eu amo cada pedacinho.
Hoje Ã© o seu aniversÃ¡rio, mas quem ganhou presente foi eu, sabia?
Ter vc na minha vida, concerteza Ã© o maior presente.
E que sorte, viu? Que sorte eu tenho! Eu sÃ³ peÃ§o a Deus que nos dÃª muitos e muitos aniversÃ¡rios juntos. Que a gente envelheÃ§a um do lado do outro, que a gente brigue por causa do ar-condicionado e da coberta, que a gente continue fazendo graÃ§a por qualquer coisa, e que o amor que temos hoje sÃ³ cresÃ§a com o tempo.
Feliz aniversÃ¡rio, MEU AMOOOR!!
Que esse seja apenas mais um de muitos anos e festas que ainda vamos comemorar juntos (com bolo e vÃ¡rios docinho pra nos dar uma dorzinha de barriga ). Que sua vida seja sempre cheia de momentos incrÃ­veis e que eu possa estar ao seu lado em cada um deles, segurando sua mÃ£o, enchendo seu saco e te amando cada vez mais.
Obrigada por ser quem vc Ã©,por existir, por me escolher.  
Obrigada pela oportunidade de estar sendo a sua mulher.

Por fim, peÃ§o desculpas se ficou muito repetitivo as coisas ou se tiver erros de digitaÃ§Ã£o por ai. Eu espero que vocÃª leia e sinta como se fosse eu falando para vc.
( C vc nÃ£o gostar, eu mato vc viu )

Feliz aniversÃ¡rio, meu bobinho, eu te amoâ¤ï¸
#festowdodiogayvivaaos23ğŸ”ğŸ¤ŸğŸ¾ğŸ‰ <br><br>
ğŸ‘‰ <a href="foto3.html" target="_blank">Clique aquiğŸ’•</a>`,
    // imagem: "foto3.jpg"
  }
};

function abrirCarta(numero) {
  const chave = `carta${numero}_aberta`;
  const jaAberta = localStorage.getItem(chave);

  if (jaAberta) {
    mostrarMensagem(numero);
    return;
  }

  if (numero === 1 || localStorage.getItem(`carta${numero - 1}_aberta`)) {
    localStorage.setItem(chave, new Date().getTime());
    mostrarMensagem(numero);
    desbloquearProxima(numero + 1);
  } else {
    alert("VocÃª precisa abrir a cartinha anterior primeiro! ğŸ’Œ");
  }
}

function mostrarMensagem(numero) {
  const area = document.getElementById("conteudo-carta");
  area.style.display = "block";

  const carta = mensagens[numero];

  area.innerHTML = `
    <div class="texto-carta">${carta.texto}</div>
    ${carta.imagem ? `<img src="${carta.imagem}" alt="Foto ${numero}" class="foto-carta">` : ""}
  `;
}

function desbloquearProxima(numero) {
  const botao = document.getElementById(`carta${numero}`);
  if (botao) botao.disabled = false;
}

function iniciarContagem(cartaNumero, timestampAnterior) {
  const timerEl = document.getElementById(`timer${cartaNumero}`);
  const tempo24Horas = 24 * 60 * 60 * 1000;

  const intervalo = setInterval(() => {
    const agora = new Date().getTime();
    const restante = tempo24Horas - (agora - parseInt(timestampAnterior, 10));

    if (restante <= 0) {
      clearInterval(intervalo);
      const botao = document.getElementById(`carta${cartaNumero}`);
      botao.disabled = false;
      timerEl.textContent = '';
      return;
    }

    const horas = Math.floor(restante / (1000 * 60 * 60));
    const minutos = Math.floor((restante % (1000 * 60 * 60)) / (1000 * 60));
    const segundos = Math.floor((restante % (1000 * 60)) / 1000);

    timerEl.textContent = `â³ Liberada em ${horas}h ${minutos}m ${segundos}s`;
  }, 1000);
}
function verificarCartasSalvas() {
  for (let i = 1; i <= 3; i++) {
    const aberta = localStorage.getItem(`carta${i}_aberta`);
    if (aberta) {
      document.getElementById(`carta${i}`).disabled = false;
    }
  }

  // Ativa contagem para carta 2 e 3, se anterior foi aberta
  for (let i = 2; i <= 3; i++) {
    const anterior = localStorage.getItem(`carta${i - 1}_aberta`);
    const atual = localStorage.getItem(`carta${i}_aberta`);

    if (anterior && !atual) {
      const agora = new Date().getTime();
      const tempoPassado = agora - parseInt(anterior, 10);

      if (tempoPassado < 24 * 60 * 60 * 1000) {
        iniciarContagem(i, anterior);
      } else {
        document.getElementById(`carta${i}`).disabled = false;
      }
    }
  }
}

  

  // Ativa contagem para carta 2 e 3, se ainda nÃ£o foram abertas
  for (let i = 2; i <= 3; i++) {
    const anterior = localStorage.getItem(`carta${i - 1}_aberta`);
    const atual = localStorage.getItem(`carta${i}_aberta`);

    if (anterior && !atual) {
      iniciarContagem(i, anterior);
    }
  }


function iniciarContagem(cartaNumero, timestampAnterior) {
  const timerEl = document.getElementById(`timer${cartaNumero}`);
  const tempo24Horas = 24 * 60 * 60 * 1000;

  const intervalo = setInterval(() => {
    const agora = new Date().getTime();
    const restante = tempo24Horas - (agora - parseInt(timestampAnterior, 10));

    if (restante <= 0) {
      clearInterval(intervalo);
      const botao = document.getElementById(`carta${cartaNumero}`);
      botao.disabled = false;
      timerEl.textContent = '';
      return;
    }

    const horas = Math.floor(restante / (1000 * 60 * 60));
    const minutos = Math.floor((restante % (1000 * 60 * 60)) / (1000 * 60));
    const segundos = Math.floor((restante % (1000 * 60)) / 1000);

    timerEl.textContent = `â³ Liberada em: ${horas}h ${minutos}m ${segundos}s`;
  }, 1000);
}
