const mensagens = {
  1: {
    texto: `E aí, amor? Ansioso para seu dia? Espero que sim! Porque eu tô aqui torcendo pra esse momento ser muito especial 💖
Espero que goste desse site, pq olha... não é fácil kkkk.Tive que mexer com JavaScript, o que não é nada legal, mas tudo por você 😘
Essa primeira carta é mais pra te explicar a dinâmica, mas acredito que você já entendeu!
São três cartas, três dias até seu aniversário. A cada 24 horas, uma nova cartinha é liberada.<br><br>
👉 <a href="foto1.html" target="_blank">Clique aqui💕</a>`,
    // imagem: "foto1.jpg"
  },
  2: {
    texto: ` Oi, meu amor. 💖

Hoje é o segundo dia dessas cartinhas, e eu queria aproveitar pra te lembrar de algo que talvez eu não diga o suficiente…
Você é uma das melhores coisas que já aconteceram na minha vida.
Com você ao meu lado, tudo é melhor.Seu abraço é meu lar, e o seu olhar me faz sentir que estou exatamente onde deveria estar. ✨
Eu admiro tudo em você, o jeito que sorri, o cuidado que tem comigo, a forma como me escuta e me entende mesmo quando eu nem sei explicar o que estou sentindo.
Estar com você é a mesma coisa que andar sob a luz, porque eu sempre enconto caminhos claros que é você.
Obrigada por ser você. Por me amar do jeitinho que eu sou. Por estar aqui.
Te amo, cada dia que passa, esse amor só cresce mais um pouquinho. ( um poucão na verdade) <br><br>
👉 <a href="foto2.html" target="_blank">Clique aqui💕</a>`,
    // imagem: "foto2.jpg"
  },
  3: {
    texto: ` Chegamos a ultima cartinha... 💞 <br><br> Meu amor, hoje é o seu tão aguardado dia, e eu nem sei por onde começar…
Como expressar em palavras o quanto vc é incrível e o quanto eu sou grata por Deus ter colocado vc na minha vida Eu sei que parece clichê, mas é real, desde que vc chegou, tudo ficou mais colorido, mais cheio de sentido. Vc virou minha paz, minha risada boba no meio do caos, meu abraço preferido no fim de um dia difícil.
Desde que te conheci, tudo ficou mais bonito, mais feliz. Seu jeitinho, seu carinho, seu sorriso, seu abraço… tudo em vc me encanta! Até quando vc tá de cara feia (que aliás, é difícil porque até bravo vc é bonito, chega até ser injusto ). Cada detalhe seu me fascina.
 Eu me apaixono por vc de novo a cada dia. Por quem vc é, pelo jeito que vc cuida de mim.
Hoje eu quero te lembrar o quanto vc é especial.E não é só porque é seu aniversário, mas porque todos os dias ao seu lado são motivo de celebração. Vc é meu parceiro, namorado e futuro esposo que vai se tornar o homem da minha  vida, meu confidente, meu apoio, meu maior incentivo. Vc me inspira, me acalma, me provoca risadas e, às vezes, umas vontades de te bater também, mas isso é normal, né?
Eu poderia passar o dia inteiro falando sobre todas as suas qualidades… como vc é gentil, inteligente, engraçado (mesmo com aquelas piadas ruins que só a gente ri), como vc me faz sentir amada só com um olhar. Como vc me dá paz. Como vc me escuta até quando eu só quero falar besteira. Como vc me respeita, me apoia, " acredita " em mim mesmo quando eu tô desanimada. E como vc me arranca sorrisos até nos dias mais difíceis, mesmo quando eu digo que quero ficar sozinha e, cinco minutos depois, já tô no seu colo como se nada tivesse acontecido.
Vc é minha pessoa. Aquela que eu quero ao meu lado em todos os momentos , nos bons e nos ruins. Aquela que eu quero construir uma vida, viajar, sonhar, fazer planos (mesmo que a gente não siga metade deles). Só de saber que vc tá comigo, tudo já me faz feliz.
E hoje, no seu dia, o meu maior desejo é que tudo de bom que existe no mundo te alcance. Que vc tenha saúde, paz, alegria, amor e prosperidade, que continue conquistando tudo aquilo que vc deseja (inclusive muito dinheiro, né amor, porque a gente merece uma vida de rei e rainha… ). Que vc continue sendo esse homem incrível, com esse coração enorme, com esse jeitinho que só vc tem de me fazer sentir a pessoa mais amada do mundo ( as vzs, pra vc não se achar tanto ).
Vc é companheiro, divertido, carinhoso, um pouquinho chato (tá, às vezes um tiquinho a mais), mas até isso me faz rir. Vc tem um jeito de me olhar que desarma qualquer mau humor, e um abraço que parece casa. Eu poderia continuar aqui por horas escrevendo, porque quando o assunto é vc, as palavras simplesmente não são suficientes.
Queria poder colocar num potinho todos os momentos bons que a gente já viveu juntos , nossos rolezinhos, nossas conversas longas por telefone, nossos beijinhos, na época do condomínio, quando ficavamos observando as estrelas e conversando, os filmes que eu tentava assistir e vc não deixava, os memes que a gente compartilha ( compartilhava né, porq vc NUNCA mais me respondeu no ttk ), os apelidos bobos que só a gente entende… tudo isso faz parte do que somos, e eu amo cada pedacinho.
Hoje é o seu aniversário, mas quem ganhou presente foi eu, sabia?
Ter vc na minha vida, concerteza é o maior presente.
E que sorte, viu? Que sorte eu tenho! Eu só peço a Deus que nos dê muitos e muitos aniversários juntos. Que a gente envelheça um do lado do outro, que a gente brigue por causa do ar-condicionado e da coberta, que a gente continue fazendo graça por qualquer coisa, e que o amor que temos hoje só cresça com o tempo.
Feliz aniversário, MEU AMOOOR!!
Que esse seja apenas mais um de muitos anos e festas que ainda vamos comemorar juntos (com bolo e vários docinho pra nos dar uma dorzinha de barriga ). Que sua vida seja sempre cheia de momentos incríveis e que eu possa estar ao seu lado em cada um deles, segurando sua mão, enchendo seu saco e te amando cada vez mais.
Obrigada por ser quem vc é,por existir, por me escolher.  
Obrigada pela oportunidade de estar sendo a sua mulher.

Por fim, peço desculpas se ficou muito repetitivo as coisas ou se tiver erros de digitação por ai. Eu espero que você leia e sinta como se fosse eu falando para vc.
( C vc não gostar, eu mato vc viu )

Feliz aniversário, meu bobinho, eu te amo❤️
#festowdodiogayvivaaos23🔞🤟🏾🎉 <br><br>
👉 <a href="foto3.html" target="_blank">Clique aqui💕</a>`,
    // imagem: "foto3.jpg"
  }
};

function abrirCarta(numero) {
  const chave = `carta${numero}_aberta`;
  const jaAberta = localStorage.getItem(chave);

  if (jaAberta) {
    mostrarMensagem(numero);
    return;
  }

  if (numero === 1 || localStorage.getItem(`carta${numero - 1}_aberta`)) {
    localStorage.setItem(chave, new Date().getTime());
    mostrarMensagem(numero);
    desbloquearProxima(numero + 1);
  } else {
    alert("Você precisa abrir a cartinha anterior primeiro! 💌");
  }
}

function mostrarMensagem(numero) {
  const area = document.getElementById("conteudo-carta");
  area.style.display = "block";

  const carta = mensagens[numero];

  area.innerHTML = `
    <div class="texto-carta">${carta.texto}</div>
    ${carta.imagem ? `<img src="${carta.imagem}" alt="Foto ${numero}" class="foto-carta">` : ""}
  `;
}

function desbloquearProxima(numero) {
  const botao = document.getElementById(`carta${numero}`);
  if (botao) botao.disabled = false;
}

function iniciarContagem(cartaNumero, timestampAnterior) {
  const timerEl = document.getElementById(`timer${cartaNumero}`);
  const tempo24Horas = 24 * 60 * 60 * 1000;

  const intervalo = setInterval(() => {
    const agora = new Date().getTime();
    const restante = tempo24Horas - (agora - parseInt(timestampAnterior, 10));

    if (restante <= 0) {
      clearInterval(intervalo);
      const botao = document.getElementById(`carta${cartaNumero}`);
      botao.disabled = false;
      timerEl.textContent = '';
      return;
    }

    const horas = Math.floor(restante / (1000 * 60 * 60));
    const minutos = Math.floor((restante % (1000 * 60 * 60)) / (1000 * 60));
    const segundos = Math.floor((restante % (1000 * 60)) / 1000);

    timerEl.textContent = `⏳ Liberada em ${horas}h ${minutos}m ${segundos}s`;
  }, 1000);
}
function verificarCartasSalvas() {
  for (let i = 1; i <= 3; i++) {
    const aberta = localStorage.getItem(`carta${i}_aberta`);
    if (aberta) {
      document.getElementById(`carta${i}`).disabled = false;
    }
  }

  // Ativa contagem para carta 2 e 3, se anterior foi aberta
  for (let i = 2; i <= 3; i++) {
    const anterior = localStorage.getItem(`carta${i - 1}_aberta`);
    const atual = localStorage.getItem(`carta${i}_aberta`);

    if (anterior && !atual) {
      const agora = new Date().getTime();
      const tempoPassado = agora - parseInt(anterior, 10);

      if (tempoPassado < 24 * 60 * 60 * 1000) {
        iniciarContagem(i, anterior);
      } else {
        document.getElementById(`carta${i}`).disabled = false;
      }
    }
  }
}

  

  // Ativa contagem para carta 2 e 3, se ainda não foram abertas
  for (let i = 2; i <= 3; i++) {
    const anterior = localStorage.getItem(`carta${i - 1}_aberta`);
    const atual = localStorage.getItem(`carta${i}_aberta`);

    if (anterior && !atual) {
      iniciarContagem(i, anterior);
    }
  }


function iniciarContagem(cartaNumero, timestampAnterior) {
  const timerEl = document.getElementById(`timer${cartaNumero}`);
  const tempo24Horas = 24 * 60 * 60 * 1000;

  const intervalo = setInterval(() => {
    const agora = new Date().getTime();
    const restante = tempo24Horas - (agora - parseInt(timestampAnterior, 10));

    if (restante <= 0) {
      clearInterval(intervalo);
      const botao = document.getElementById(`carta${cartaNumero}`);
      botao.disabled = false;
      timerEl.textContent = '';
      return;
    }

    const horas = Math.floor(restante / (1000 * 60 * 60));
    const minutos = Math.floor((restante % (1000 * 60 * 60)) / (1000 * 60));
    const segundos = Math.floor((restante % (1000 * 60)) / 1000);

    timerEl.textContent = `⏳ Liberada em: ${horas}h ${minutos}m ${segundos}s`;
  }, 1000);
}
